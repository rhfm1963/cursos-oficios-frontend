<div class="container my-4">
  <h3>Valorar Taller: {{ curso?.titulo }}</h3>
  <p><strong>Maestro:</strong> {{ curso?.maestro.nombre }} ({{ curso?.maestro.especialidad }})</p>

  <form (ngSubmit)="onSubmit()" *ngIf="!enviado; else gracias">
    <div class="mb-3">
      <label class="form-label" for="calificacion-rating">Calificación</label>
      <div class="rating" id="calificacion-rating">
        <button type="button"
                *ngFor="let star of [1,2,3,4,5]; let i = index"
                (click)="calificacion = i + 1"
                (keydown.enter)="calificacion = i + 1"
                [attr.tabindex]="0"
                [class.selected]="i < calificacion"
                style="font-size: 2rem; cursor: pointer; color: #ffc107; background: none; border: none; padding: 0;">
          ★
        </button>
      </div>
    </div>

    <div class="mb-3">
      <label for="comentario" class="form-label">Comentario</label>
      <textarea
        class="form-control"
        id="comentario"
        rows="4"
        [(ngModel)]="comentario"
        name="comentario"
        required></textarea>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="cargando">
      {{ cargando ? 'Enviando...' : 'Enviar Valoración' }}
    </button>
    <div class="text-danger mt-2" *ngIf="error">{{ error }}</div>
  </form>

  <ng-template #gracias>
    <div class="alert alert-success">
      <h4>¡Gracias por tu valoración!</h4>
      <p>Estás fortaleciendo la calidad de los talleres comunitarios.</p>
    </div>
  </ng-template>
</div>